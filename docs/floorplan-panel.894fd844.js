parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"p0+R":[function(require,module,exports) {
"use strict";var s;Object.defineProperty(exports,"__esModule",{value:!0}),exports.FloorplanInfo=void 0,exports.FloorplanInfo=s,function(s){s.PageInfo=class{constructor(){this.isMaster=!1,this.isDefault=!1}};s.ElementInfo=class{constructor(){this.ruleInfos=new Array}};s.SvgElementInfo=class{constructor(s,t,o,e,n,r,i){this.entityId=s,this.svg=t,this.svgElement=o,this.originalSvgElement=e,this.originalClasses=n,this.originalBBox=r,this.originalClientRect=i}};s.RuleInfo=class{constructor(s){this.rule=s,this.svgElementInfos=new Map,this.propagate=!1,this.rule=s}};s.EntityInfo=class{constructor(){this.ruleInfos=new Array}}}(s||(exports.FloorplanInfo=s={}));
},{}],"aEOy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FullyKiosk=void 0;class o{constructor(o){this.floorplan=o}init(){}}exports.FullyKiosk=o;
},{}],"dLxY":[function(require,module,exports) {
function l(l,n,u){var e,t,o,a,r;function i(){var c=Date.now()-a;c<n&&c>=0?e=setTimeout(i,n-c):(e=null,u||(r=l.apply(o,t),o=t=null))}null==n&&(n=100);var c=function(){o=this,t=arguments,a=Date.now();var c=u&&!e;return e||(e=setTimeout(i,n)),c&&(r=l.apply(o,t),o=t=null),r};return c.clear=function(){e&&(clearTimeout(e),e=null)},c.flush=function(){e&&(r=l.apply(o,t),o=t=null,clearTimeout(e),e=null)},c}l.debounce=l,module.exports=l;
},{}],"S/mA":[function(require,module,exports) {
"use strict";function e(e){return null==e}function r(e){return"object"==typeof e&&null!==e}function t(r){return Array.isArray(r)?r:e(r)?[]:[r]}function o(e,r){var t,o,n,u;if(r)for(t=0,o=(u=Object.keys(r)).length;t<o;t+=1)e[n=u[t]]=r[n];return e}function n(e,r){var t,o="";for(t=0;t<r;t+=1)o+=e;return o}function u(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e}module.exports.isNothing=e,module.exports.isObject=r,module.exports.toArray=t,module.exports.repeat=n,module.exports.isNegativeZero=u,module.exports.extend=o;
},{}],"78AQ":[function(require,module,exports) {
"use strict";function t(t,r){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=r,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t.prototype.toString=function(t){var r=this.name+": ";return r+=this.reason||"(unknown reason)",!t&&this.mark&&(r+=" "+this.mark.toString()),r},module.exports=t;
},{}],"Ju+9":[function(require,module,exports) {
"use strict";var t=require("./common");function i(t,i,n,e,r){this.name=t,this.buffer=i,this.position=n,this.line=e,this.column=r}i.prototype.getSnippet=function(i,n){var e,r,s,o,h;if(!this.buffer)return null;for(i=i||4,n=n||75,e="",r=this.position;r>0&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(r-1));)if(r-=1,this.position-r>n/2-1){e=" ... ",r+=5;break}for(s="",o=this.position;o<this.buffer.length&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(o));)if((o+=1)-this.position>n/2-1){s=" ... ",o-=5;break}return h=this.buffer.slice(r,o),t.repeat(" ",i)+e+h+s+"\n"+t.repeat(" ",i+this.position-r+e.length)+"^"},i.prototype.toString=function(t){var i,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),t||(i=this.getSnippet())&&(n+=":\n"+i),n},module.exports=i;
},{"./common":"S/mA"}],"XcPh":[function(require,module,exports) {
"use strict";var e=require("./exception"),n=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],t=["scalar","sequence","mapping"];function i(e){var n={};return null!==e&&Object.keys(e).forEach(function(t){e[t].forEach(function(e){n[String(e)]=t})}),n}function s(s,r){if(r=r||{},Object.keys(r).forEach(function(t){if(-1===n.indexOf(t))throw new e('Unknown option "'+t+'" is met in definition of "'+s+'" YAML type.')}),this.tag=s,this.kind=r.kind||null,this.resolve=r.resolve||function(){return!0},this.construct=r.construct||function(e){return e},this.instanceOf=r.instanceOf||null,this.predicate=r.predicate||null,this.represent=r.represent||null,this.defaultStyle=r.defaultStyle||null,this.styleAliases=i(r.styleAliases||null),-1===t.indexOf(this.kind))throw new e('Unknown kind "'+this.kind+'" is specified for "'+s+'" YAML type.')}module.exports=s;
},{"./exception":"78AQ"}],"nYLM":[function(require,module,exports) {
"use strict";var i=require("./common"),e=require("./exception"),t=require("./type");function n(i,e,t){var c=[];return i.include.forEach(function(i){t=n(i,e,t)}),i[e].forEach(function(i){t.forEach(function(e,t){e.tag===i.tag&&e.kind===i.kind&&c.push(t)}),t.push(i)}),t.filter(function(i,e){return-1===c.indexOf(e)})}function c(){var i,e,t={scalar:{},sequence:{},mapping:{},fallback:{}};function n(i){t[i.kind][i.tag]=t.fallback[i.tag]=i}for(i=0,e=arguments.length;i<e;i+=1)arguments[i].forEach(n);return t}function o(i){this.include=i.include||[],this.implicit=i.implicit||[],this.explicit=i.explicit||[],this.implicit.forEach(function(i){if(i.loadKind&&"scalar"!==i.loadKind)throw new e("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=n(this,"implicit",[]),this.compiledExplicit=n(this,"explicit",[]),this.compiledTypeMap=c(this.compiledImplicit,this.compiledExplicit)}o.DEFAULT=null,o.create=function(){var n,c;switch(arguments.length){case 1:n=o.DEFAULT,c=arguments[0];break;case 2:n=arguments[0],c=arguments[1];break;default:throw new e("Wrong number of arguments for Schema.create function")}if(n=i.toArray(n),c=i.toArray(c),!n.every(function(i){return i instanceof o}))throw new e("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!c.every(function(i){return i instanceof t}))throw new e("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new o({include:n,explicit:c})},module.exports=o;
},{"./common":"S/mA","./exception":"78AQ","./type":"XcPh"}],"Fal9":[function(require,module,exports) {
"use strict";var r=require("../type");module.exports=new r("tag:yaml.org,2002:str",{kind:"scalar",construct:function(r){return null!==r?r:""}});
},{"../type":"XcPh"}],"U5Pz":[function(require,module,exports) {
"use strict";var e=require("../type");module.exports=new e("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}});
},{"../type":"XcPh"}],"a4cL":[function(require,module,exports) {
"use strict";var r=require("../type");module.exports=new r("tag:yaml.org,2002:map",{kind:"mapping",construct:function(r){return null!==r?r:{}}});
},{"../type":"XcPh"}],"EJga":[function(require,module,exports) {
"use strict";var e=require("../schema");module.exports=new e({explicit:[require("../type/str"),require("../type/seq"),require("../type/map")]});
},{"../schema":"nYLM","../type/str":"Fal9","../type/seq":"U5Pz","../type/map":"a4cL"}],"C9fO":[function(require,module,exports) {
"use strict";var n=require("../type");function e(n){if(null===n)return!0;var e=n.length;return 1===e&&"~"===n||4===e&&("null"===n||"Null"===n||"NULL"===n)}function r(){return null}function u(n){return null===n}module.exports=new n("tag:yaml.org,2002:null",{kind:"scalar",resolve:e,construct:r,predicate:u,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"});
},{"../type":"XcPh"}],"GrS1":[function(require,module,exports) {
"use strict";var e=require("../type");function r(e){if(null===e)return!1;var r=e.length;return 4===r&&("true"===e||"True"===e||"TRUE"===e)||5===r&&("false"===e||"False"===e||"FALSE"===e)}function t(e){return"true"===e||"True"===e||"TRUE"===e}function n(e){return"[object Boolean]"===Object.prototype.toString.call(e)}module.exports=new e("tag:yaml.org,2002:bool",{kind:"scalar",resolve:r,construct:t,predicate:n,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});
},{"../type":"XcPh"}],"elsh":[function(require,module,exports) {
"use strict";var r=require("../common"),t=require("../type");function e(r){return 48<=r&&r<=57||65<=r&&r<=70||97<=r&&r<=102}function n(r){return 48<=r&&r<=55}function i(r){return 48<=r&&r<=57}function o(r){if(null===r)return!1;var t,o=r.length,c=0,u=!1;if(!o)return!1;if("-"!==(t=r[c])&&"+"!==t||(t=r[++c]),"0"===t){if(c+1===o)return!0;if("b"===(t=r[++c])){for(c++;c<o;c++)if("_"!==(t=r[c])){if("0"!==t&&"1"!==t)return!1;u=!0}return u&&"_"!==t}if("x"===t){for(c++;c<o;c++)if("_"!==(t=r[c])){if(!e(r.charCodeAt(c)))return!1;u=!0}return u&&"_"!==t}for(;c<o;c++)if("_"!==(t=r[c])){if(!n(r.charCodeAt(c)))return!1;u=!0}return u&&"_"!==t}if("_"===t)return!1;for(;c<o;c++)if("_"!==(t=r[c])){if(":"===t)break;if(!i(r.charCodeAt(c)))return!1;u=!0}return!(!u||"_"===t)&&(":"!==t||/^(:[0-5]?[0-9])+$/.test(r.slice(c)))}function c(r){var t,e,n=r,i=1,o=[];return-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(i=-1),t=(n=n.slice(1))[0]),"0"===n?0:"0"===t?"b"===n[1]?i*parseInt(n.slice(2),2):"x"===n[1]?i*parseInt(n,16):i*parseInt(n,8):-1!==n.indexOf(":")?(n.split(":").forEach(function(r){o.unshift(parseInt(r,10))}),n=0,e=1,o.forEach(function(r){n+=r*e,e*=60}),i*n):i*parseInt(n,10)}function u(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!r.isNegativeZero(t)}module.exports=new t("tag:yaml.org,2002:int",{kind:"scalar",resolve:o,construct:c,predicate:u,represent:{binary:function(r){return r>=0?"0b"+r.toString(2):"-0b"+r.toString(2).slice(1)},octal:function(r){return r>=0?"0"+r.toString(8):"-0"+r.toString(8).slice(1)},decimal:function(r){return r.toString(10)},hexadecimal:function(r){return r>=0?"0x"+r.toString(16).toUpperCase():"-0x"+r.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}});
},{"../common":"S/mA","../type":"XcPh"}],"Pr8W":[function(require,module,exports) {
"use strict";var e=require("../common"),r=require("../type"),t=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function a(e){return null!==e&&!(!t.test(e)||"_"===e[e.length-1])}function n(e){var r,t,a,n;return t="-"===(r=e.replace(/_/g,"").toLowerCase())[0]?-1:1,n=[],"+-".indexOf(r[0])>=0&&(r=r.slice(1)),".inf"===r?1===t?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===r?NaN:r.indexOf(":")>=0?(r.split(":").forEach(function(e){n.unshift(parseFloat(e,10))}),r=0,a=1,n.forEach(function(e){r+=e*a,a*=60}),t*r):t*parseFloat(r,10)}var c=/^[-+]?[0-9]+e/;function s(r,t){var a;if(isNaN(r))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===r)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===r)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(e.isNegativeZero(r))return"-0.0";return a=r.toString(10),c.test(a)?a.replace("e",".e"):a}function u(r){return"[object Number]"===Object.prototype.toString.call(r)&&(r%1!=0||e.isNegativeZero(r))}module.exports=new r("tag:yaml.org,2002:float",{kind:"scalar",resolve:a,construct:n,predicate:u,represent:s,defaultStyle:"lowercase"});
},{"../common":"S/mA","../type":"XcPh"}],"ZUfC":[function(require,module,exports) {
"use strict";var e=require("../schema");module.exports=new e({include:[require("./failsafe")],implicit:[require("../type/null"),require("../type/bool"),require("../type/int"),require("../type/float")]});
},{"../schema":"nYLM","./failsafe":"EJga","../type/null":"C9fO","../type/bool":"GrS1","../type/int":"elsh","../type/float":"Pr8W"}],"wwCT":[function(require,module,exports) {
"use strict";var e=require("../schema");module.exports=new e({include:[require("./json")]});
},{"../schema":"nYLM","./json":"ZUfC"}],"eBHa":[function(require,module,exports) {
"use strict";var e=require("../type"),t=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),r=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function n(e){return null!==e&&(null!==t.exec(e)||null!==r.exec(e))}function l(e){var n,l,u,i,a,o,c,s,f=0,g=null;if(null===(n=t.exec(e))&&(n=r.exec(e)),null===n)throw new Error("Date resolve error");if(l=+n[1],u=+n[2]-1,i=+n[3],!n[4])return new Date(Date.UTC(l,u,i));if(a=+n[4],o=+n[5],c=+n[6],n[7]){for(f=n[7].slice(0,3);f.length<3;)f+="0";f=+f}return n[9]&&(g=6e4*(60*+n[10]+ +(n[11]||0)),"-"===n[9]&&(g=-g)),s=new Date(Date.UTC(l,u,i,a,o,c,f)),g&&s.setTime(s.getTime()-g),s}function u(e){return e.toISOString()}module.exports=new e("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:n,construct:l,instanceOf:Date,represent:u});
},{"../type":"XcPh"}],"yG2a":[function(require,module,exports) {
"use strict";var e=require("../type");function r(e){return"<<"===e||null===e}module.exports=new e("tag:yaml.org,2002:merge",{kind:"scalar",resolve:r});
},{"../type":"XcPh"}],"i4/Y":[function(require,module,exports) {
"use strict";var r;try{var e=require;r=e("buffer").Buffer}catch(i){}var n=require("../type"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";function t(r){if(null===r)return!1;var e,n,t=0,f=r.length,s=u;for(n=0;n<f;n++)if(!((e=s.indexOf(r.charAt(n)))>64)){if(e<0)return!1;t+=6}return t%8==0}function f(e){var n,t,f=e.replace(/[\r\n=]/g,""),s=f.length,a=u,i=0,h=[];for(n=0;n<s;n++)n%4==0&&n&&(h.push(i>>16&255),h.push(i>>8&255),h.push(255&i)),i=i<<6|a.indexOf(f.charAt(n));return 0===(t=s%4*6)?(h.push(i>>16&255),h.push(i>>8&255),h.push(255&i)):18===t?(h.push(i>>10&255),h.push(i>>2&255)):12===t&&h.push(i>>4&255),r?r.from?r.from(h):new r(h):h}function s(r){var e,n,t="",f=0,s=r.length,a=u;for(e=0;e<s;e++)e%3==0&&e&&(t+=a[f>>18&63],t+=a[f>>12&63],t+=a[f>>6&63],t+=a[63&f]),f=(f<<8)+r[e];return 0===(n=s%3)?(t+=a[f>>18&63],t+=a[f>>12&63],t+=a[f>>6&63],t+=a[63&f]):2===n?(t+=a[f>>10&63],t+=a[f>>4&63],t+=a[f<<2&63],t+=a[64]):1===n&&(t+=a[f>>2&63],t+=a[f<<4&63],t+=a[64],t+=a[64]),t}function a(e){return r&&r.isBuffer(e)}module.exports=new n("tag:yaml.org,2002:binary",{kind:"scalar",resolve:t,construct:f,predicate:a,represent:s});
},{"../type":"XcPh"}],"dG94":[function(require,module,exports) {
"use strict";var r=require("../type"),e=Object.prototype.hasOwnProperty,t=Object.prototype.toString;function n(r){if(null===r)return!0;var n,o,u,i,c,l=[],f=r;for(n=0,o=f.length;n<o;n+=1){if(u=f[n],c=!1,"[object Object]"!==t.call(u))return!1;for(i in u)if(e.call(u,i)){if(c)return!1;c=!0}if(!c)return!1;if(-1!==l.indexOf(i))return!1;l.push(i)}return!0}function o(r){return null!==r?r:[]}module.exports=new r("tag:yaml.org,2002:omap",{kind:"sequence",resolve:n,construct:o});
},{"../type":"XcPh"}],"bJLp":[function(require,module,exports) {
"use strict";var e=require("../type"),r=Object.prototype.toString;function t(e){if(null===e)return!0;var t,n,u,l,o,c=e;for(o=new Array(c.length),t=0,n=c.length;t<n;t+=1){if(u=c[t],"[object Object]"!==r.call(u))return!1;if(1!==(l=Object.keys(u)).length)return!1;o[t]=[l[0],u[l[0]]]}return!0}function n(e){if(null===e)return[];var r,t,n,u,l,o=e;for(l=new Array(o.length),r=0,t=o.length;r<t;r+=1)n=o[r],u=Object.keys(n),l[r]=[u[0],n[u[0]]];return l}module.exports=new e("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:t,construct:n});
},{"../type":"XcPh"}],"rVo6":[function(require,module,exports) {
"use strict";var r=require("../type"),t=Object.prototype.hasOwnProperty;function e(r){if(null===r)return!0;var e,n=r;for(e in n)if(t.call(n,e)&&null!==n[e])return!1;return!0}function n(r){return null!==r?r:{}}module.exports=new r("tag:yaml.org,2002:set",{kind:"mapping",resolve:e,construct:n});
},{"../type":"XcPh"}],"tLdR":[function(require,module,exports) {
"use strict";var e=require("../schema");module.exports=new e({include:[require("./core")],implicit:[require("../type/timestamp"),require("../type/merge")],explicit:[require("../type/binary"),require("../type/omap"),require("../type/pairs"),require("../type/set")]});
},{"../schema":"nYLM","./core":"wwCT","../type/timestamp":"eBHa","../type/merge":"yG2a","../type/binary":"i4/Y","../type/omap":"dG94","../type/pairs":"bJLp","../type/set":"rVo6"}],"fT4J":[function(require,module,exports) {
"use strict";var e=require("../../type");function r(){return!0}function n(){}function t(){return""}function u(e){return void 0===e}module.exports=new e("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:r,construct:n,predicate:u,represent:t});
},{"../../type":"XcPh"}],"bAag":[function(require,module,exports) {
"use strict";var e=require("../../type");function r(e){if(null===e)return!1;if(0===e.length)return!1;var r=e,t=/\/([gim]*)$/.exec(e),n="";if("/"===r[0]){if(t&&(n=t[1]),n.length>3)return!1;if("/"!==r[r.length-n.length-1])return!1}return!0}function t(e){var r=e,t=/\/([gim]*)$/.exec(e),n="";return"/"===r[0]&&(t&&(n=t[1]),r=r.slice(1,r.length-n.length-1)),new RegExp(r,n)}function n(e){var r="/"+e.source+"/";return e.global&&(r+="g"),e.multiline&&(r+="m"),e.ignoreCase&&(r+="i"),r}function i(e){return"[object RegExp]"===Object.prototype.toString.call(e)}module.exports=new e("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:r,construct:t,predicate:i,represent:n});
},{"../../type":"XcPh"}],"a0mu":[function(require,module,exports) {
"use strict";var e;try{var r=require;e=r("esprima")}catch(p){"undefined"!=typeof window&&(e=window.esprima)}var n=require("../../type");function t(r){if(null===r)return!1;try{var n="("+r+")",t=e.parse(n,{range:!0});return"Program"===t.type&&1===t.body.length&&"ExpressionStatement"===t.body[0].type&&("ArrowFunctionExpression"===t.body[0].expression.type||"FunctionExpression"===t.body[0].expression.type)}catch(o){return!1}}function o(r){var n,t="("+r+")",o=e.parse(t,{range:!0}),i=[];if("Program"!==o.type||1!==o.body.length||"ExpressionStatement"!==o.body[0].type||"ArrowFunctionExpression"!==o.body[0].expression.type&&"FunctionExpression"!==o.body[0].expression.type)throw new Error("Failed to resolve function");return o.body[0].expression.params.forEach(function(e){i.push(e.name)}),n=o.body[0].expression.body.range,"BlockStatement"===o.body[0].expression.body.type?new Function(i,t.slice(n[0]+1,n[1]-1)):new Function(i,"return "+t.slice(n[0],n[1]))}function i(e){return e.toString()}function s(e){return"[object Function]"===Object.prototype.toString.call(e)}module.exports=new n("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:t,construct:o,predicate:s,represent:i});
},{"../../type":"XcPh"}],"HKwV":[function(require,module,exports) {
"use strict";var e=require("../schema");module.exports=e.DEFAULT=new e({include:[require("./default_safe")],explicit:[require("../type/js/undefined"),require("../type/js/regexp"),require("../type/js/function")]});
},{"../schema":"nYLM","./default_safe":"tLdR","../type/js/undefined":"fT4J","../type/js/regexp":"bAag","../type/js/function":"a0mu"}],"puZk":[function(require,module,exports) {
"use strict";var t=require("./common"),n=require("./exception"),i=require("./mark"),e=require("./schema/default_safe"),o=require("./schema/default_full"),r=Object.prototype.hasOwnProperty,a=1,s=2,l=3,p=4,c=1,u=2,d=3,h=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,f=/[\x85\u2028\u2029]/,g=/[,\[\]\{\}]/,A=/^(?:!|!!|![a-z\-]+!)$/i,m=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function C(t){return Object.prototype.toString.call(t)}function k(t){return 10===t||13===t}function b(t){return 9===t||32===t}function v(t){return 9===t||32===t||10===t||13===t}function y(t){return 44===t||91===t||93===t||123===t||125===t}function x(t){var n;return 48<=t&&t<=57?t-48:97<=(n=32|t)&&n<=102?n-97+10:-1}function w(t){return 120===t?2:117===t?4:85===t?8:0}function I(t){return 48<=t&&t<=57?t-48:-1}function M(t){return 48===t?"\0":97===t?"":98===t?"\b":116===t?"\t":9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"":95===t?" ":76===t?"\u2028":80===t?"\u2029":""}function F(t){return t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}for(var j=new Array(256),S=new Array(256),q=0;q<256;q++)j[q]=M(q)?1:0,S[q]=M(q);function L(t,n){this.input=t,this.filename=n.filename||null,this.schema=n.schema||o,this.onWarning=n.onWarning||null,this.legacy=n.legacy||!1,this.json=n.json||!1,this.listener=n.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function O(t,e){return new n(e,new i(t.filename,t.input,t.position,t.line,t.position-t.lineStart))}function D(t,n){throw O(t,n)}function T(t,n){t.onWarning&&t.onWarning.call(null,O(t,n))}var B={YAML:function(t,n,i){var e,o,r;null!==t.version&&D(t,"duplication of %YAML directive"),1!==i.length&&D(t,"YAML directive accepts exactly one argument"),null===(e=/^([0-9]+)\.([0-9]+)$/.exec(i[0]))&&D(t,"ill-formed argument of the YAML directive"),o=parseInt(e[1],10),r=parseInt(e[2],10),1!==o&&D(t,"unacceptable YAML version of the document"),t.version=i[0],t.checkLineBreaks=r<2,1!==r&&2!==r&&T(t,"unsupported YAML version of the document")},TAG:function(t,n,i){var e,o;2!==i.length&&D(t,"TAG directive accepts exactly two arguments"),e=i[0],o=i[1],A.test(e)||D(t,"ill-formed tag handle (first argument) of the TAG directive"),r.call(t.tagMap,e)&&D(t,'there is a previously declared suffix for "'+e+'" tag handle'),m.test(o)||D(t,"ill-formed tag prefix (second argument) of the TAG directive"),t.tagMap[e]=o}};function Y(t,n,i,e){var o,r,a,s;if(n<i){if(s=t.input.slice(n,i),e)for(o=0,r=s.length;o<r;o+=1)9===(a=s.charCodeAt(o))||32<=a&&a<=1114111||D(t,"expected valid JSON character");else h.test(s)&&D(t,"the stream contains non-printable characters");t.result+=s}}function G(n,i,e,o){var a,s,l,p;for(t.isObject(e)||D(n,"cannot merge mappings; the provided source object is unacceptable"),l=0,p=(a=Object.keys(e)).length;l<p;l+=1)s=a[l],r.call(i,s)||(i[s]=e[s],o[s]=!0)}function W(t,n,i,e,o,a,s,l){var p,c;if(Array.isArray(o))for(p=0,c=(o=Array.prototype.slice.call(o)).length;p<c;p+=1)Array.isArray(o[p])&&D(t,"nested arrays are not supported inside keys"),"object"==typeof o&&"[object Object]"===C(o[p])&&(o[p]="[object Object]");if("object"==typeof o&&"[object Object]"===C(o)&&(o="[object Object]"),o=String(o),null===n&&(n={}),"tag:yaml.org,2002:merge"===e)if(Array.isArray(a))for(p=0,c=a.length;p<c;p+=1)G(t,n,a[p],i);else G(t,n,a,i);else t.json||r.call(i,o)||!r.call(n,o)||(t.line=s||t.line,t.position=l||t.position,D(t,"duplicated mapping key")),n[o]=a,delete i[o];return n}function $(t){var n;10===(n=t.input.charCodeAt(t.position))?t.position++:13===n?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):D(t,"a line break is expected"),t.line+=1,t.lineStart=t.position}function _(t,n,i){for(var e=0,o=t.input.charCodeAt(t.position);0!==o;){for(;b(o);)o=t.input.charCodeAt(++t.position);if(n&&35===o)do{o=t.input.charCodeAt(++t.position)}while(10!==o&&13!==o&&0!==o);if(!k(o))break;for($(t),o=t.input.charCodeAt(t.position),e++,t.lineIndent=0;32===o;)t.lineIndent++,o=t.input.charCodeAt(++t.position)}return-1!==i&&0!==e&&t.lineIndent<i&&T(t,"deficient indentation"),e}function z(t){var n,i=t.position;return!(45!==(n=t.input.charCodeAt(i))&&46!==n||n!==t.input.charCodeAt(i+1)||n!==t.input.charCodeAt(i+2)||(i+=3,0!==(n=t.input.charCodeAt(i))&&!v(n)))}function E(n,i){1===i?n.result+=" ":i>1&&(n.result+=t.repeat("\n",i-1))}function P(t,n,i){var e,o,r,a,s,l,p,c,u=t.kind,d=t.result;if(v(c=t.input.charCodeAt(t.position))||y(c)||35===c||38===c||42===c||33===c||124===c||62===c||39===c||34===c||37===c||64===c||96===c)return!1;if((63===c||45===c)&&(v(e=t.input.charCodeAt(t.position+1))||i&&y(e)))return!1;for(t.kind="scalar",t.result="",o=r=t.position,a=!1;0!==c;){if(58===c){if(v(e=t.input.charCodeAt(t.position+1))||i&&y(e))break}else if(35===c){if(v(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&z(t)||i&&y(c))break;if(k(c)){if(s=t.line,l=t.lineStart,p=t.lineIndent,_(t,!1,-1),t.lineIndent>=n){a=!0,c=t.input.charCodeAt(t.position);continue}t.position=r,t.line=s,t.lineStart=l,t.lineIndent=p;break}}a&&(Y(t,o,r,!1),E(t,t.line-s),o=r=t.position,a=!1),b(c)||(r=t.position+1),c=t.input.charCodeAt(++t.position)}return Y(t,o,r,!1),!!t.result||(t.kind=u,t.result=d,!1)}function J(t,n){var i,e,o;if(39!==(i=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,e=o=t.position;0!==(i=t.input.charCodeAt(t.position));)if(39===i){if(Y(t,e,t.position,!0),39!==(i=t.input.charCodeAt(++t.position)))return!0;e=t.position,t.position++,o=t.position}else k(i)?(Y(t,e,o,!0),E(t,_(t,!1,n)),e=o=t.position):t.position===t.lineStart&&z(t)?D(t,"unexpected end of the document within a single quoted scalar"):(t.position++,o=t.position);D(t,"unexpected end of the stream within a single quoted scalar")}function N(t,n){var i,e,o,r,a,s;if(34!==(s=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,i=e=t.position;0!==(s=t.input.charCodeAt(t.position));){if(34===s)return Y(t,i,t.position,!0),t.position++,!0;if(92===s){if(Y(t,i,t.position,!0),k(s=t.input.charCodeAt(++t.position)))_(t,!1,n);else if(s<256&&j[s])t.result+=S[s],t.position++;else if((a=w(s))>0){for(o=a,r=0;o>0;o--)(a=x(s=t.input.charCodeAt(++t.position)))>=0?r=(r<<4)+a:D(t,"expected hexadecimal character");t.result+=F(r),t.position++}else D(t,"unknown escape sequence");i=e=t.position}else k(s)?(Y(t,i,e,!0),E(t,_(t,!1,n)),i=e=t.position):t.position===t.lineStart&&z(t)?D(t,"unexpected end of the document within a double quoted scalar"):(t.position++,e=t.position)}D(t,"unexpected end of the stream within a double quoted scalar")}function H(t,n){var i,e,o,r,s,l,p,c,u,d,h=!0,f=t.tag,g=t.anchor,A={};if(91===(d=t.input.charCodeAt(t.position)))o=93,l=!1,e=[];else{if(123!==d)return!1;o=125,l=!0,e={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=e),d=t.input.charCodeAt(++t.position);0!==d;){if(_(t,!0,n),(d=t.input.charCodeAt(t.position))===o)return t.position++,t.tag=f,t.anchor=g,t.kind=l?"mapping":"sequence",t.result=e,!0;h||D(t,"missed comma between flow collection entries"),u=null,r=s=!1,63===d&&v(t.input.charCodeAt(t.position+1))&&(r=s=!0,t.position++,_(t,!0,n)),i=t.line,Z(t,n,a,!1,!0),c=t.tag,p=t.result,_(t,!0,n),d=t.input.charCodeAt(t.position),!s&&t.line!==i||58!==d||(r=!0,d=t.input.charCodeAt(++t.position),_(t,!0,n),Z(t,n,a,!1,!0),u=t.result),l?W(t,e,A,c,p,u):r?e.push(W(t,null,A,c,p,u)):e.push(p),_(t,!0,n),44===(d=t.input.charCodeAt(t.position))?(h=!0,d=t.input.charCodeAt(++t.position)):h=!1}D(t,"unexpected end of the stream within a flow collection")}function K(n,i){var e,o,r,a,s=c,l=!1,p=!1,h=i,f=0,g=!1;if(124===(a=n.input.charCodeAt(n.position)))o=!1;else{if(62!==a)return!1;o=!0}for(n.kind="scalar",n.result="";0!==a;)if(43===(a=n.input.charCodeAt(++n.position))||45===a)c===s?s=43===a?d:u:D(n,"repeat of a chomping mode identifier");else{if(!((r=I(a))>=0))break;0===r?D(n,"bad explicit indentation width of a block scalar; it cannot be less than one"):p?D(n,"repeat of an indentation width identifier"):(h=i+r-1,p=!0)}if(b(a)){do{a=n.input.charCodeAt(++n.position)}while(b(a));if(35===a)do{a=n.input.charCodeAt(++n.position)}while(!k(a)&&0!==a)}for(;0!==a;){for($(n),n.lineIndent=0,a=n.input.charCodeAt(n.position);(!p||n.lineIndent<h)&&32===a;)n.lineIndent++,a=n.input.charCodeAt(++n.position);if(!p&&n.lineIndent>h&&(h=n.lineIndent),k(a))f++;else{if(n.lineIndent<h){s===d?n.result+=t.repeat("\n",l?1+f:f):s===c&&l&&(n.result+="\n");break}for(o?b(a)?(g=!0,n.result+=t.repeat("\n",l?1+f:f)):g?(g=!1,n.result+=t.repeat("\n",f+1)):0===f?l&&(n.result+=" "):n.result+=t.repeat("\n",f):n.result+=t.repeat("\n",l?1+f:f),l=!0,p=!0,f=0,e=n.position;!k(a)&&0!==a;)a=n.input.charCodeAt(++n.position);Y(n,e,n.position,!1)}}return!0}function Q(t,n){var i,e,o=t.tag,r=t.anchor,a=[],s=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=a),e=t.input.charCodeAt(t.position);0!==e&&45===e&&v(t.input.charCodeAt(t.position+1));)if(s=!0,t.position++,_(t,!0,-1)&&t.lineIndent<=n)a.push(null),e=t.input.charCodeAt(t.position);else if(i=t.line,Z(t,n,l,!1,!0),a.push(t.result),_(t,!0,-1),e=t.input.charCodeAt(t.position),(t.line===i||t.lineIndent>n)&&0!==e)D(t,"bad indentation of a sequence entry");else if(t.lineIndent<n)break;return!!s&&(t.tag=o,t.anchor=r,t.kind="sequence",t.result=a,!0)}function R(t,n,i){var e,o,r,a,l,c=t.tag,u=t.anchor,d={},h={},f=null,g=null,A=null,m=!1,C=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=d),l=t.input.charCodeAt(t.position);0!==l;){if(e=t.input.charCodeAt(t.position+1),r=t.line,a=t.position,63!==l&&58!==l||!v(e)){if(!Z(t,i,s,!1,!0))break;if(t.line===r){for(l=t.input.charCodeAt(t.position);b(l);)l=t.input.charCodeAt(++t.position);if(58===l)v(l=t.input.charCodeAt(++t.position))||D(t,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(W(t,d,h,f,g,null),f=g=A=null),C=!0,m=!1,o=!1,f=t.tag,g=t.result;else{if(!C)return t.tag=c,t.anchor=u,!0;D(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!C)return t.tag=c,t.anchor=u,!0;D(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===l?(m&&(W(t,d,h,f,g,null),f=g=A=null),C=!0,m=!0,o=!0):m?(m=!1,o=!0):D(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,l=e;if((t.line===r||t.lineIndent>n)&&(Z(t,n,p,!0,o)&&(m?g=t.result:A=t.result),m||(W(t,d,h,f,g,A,r,a),f=g=A=null),_(t,!0,-1),l=t.input.charCodeAt(t.position)),t.lineIndent>n&&0!==l)D(t,"bad indentation of a mapping entry");else if(t.lineIndent<n)break}return m&&W(t,d,h,f,g,null),C&&(t.tag=c,t.anchor=u,t.kind="mapping",t.result=d),C}function U(t){var n,i,e,o,a=!1,s=!1;if(33!==(o=t.input.charCodeAt(t.position)))return!1;if(null!==t.tag&&D(t,"duplication of a tag property"),60===(o=t.input.charCodeAt(++t.position))?(a=!0,o=t.input.charCodeAt(++t.position)):33===o?(s=!0,i="!!",o=t.input.charCodeAt(++t.position)):i="!",n=t.position,a){do{o=t.input.charCodeAt(++t.position)}while(0!==o&&62!==o);t.position<t.length?(e=t.input.slice(n,t.position),o=t.input.charCodeAt(++t.position)):D(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==o&&!v(o);)33===o&&(s?D(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(n-1,t.position+1),A.test(i)||D(t,"named tag handle cannot contain such characters"),s=!0,n=t.position+1)),o=t.input.charCodeAt(++t.position);e=t.input.slice(n,t.position),g.test(e)&&D(t,"tag suffix cannot contain flow indicator characters")}return e&&!m.test(e)&&D(t,"tag name cannot contain such characters: "+e),a?t.tag=e:r.call(t.tagMap,i)?t.tag=t.tagMap[i]+e:"!"===i?t.tag="!"+e:"!!"===i?t.tag="tag:yaml.org,2002:"+e:D(t,'undeclared tag handle "'+i+'"'),!0}function V(t){var n,i;if(38!==(i=t.input.charCodeAt(t.position)))return!1;for(null!==t.anchor&&D(t,"duplication of an anchor property"),i=t.input.charCodeAt(++t.position),n=t.position;0!==i&&!v(i)&&!y(i);)i=t.input.charCodeAt(++t.position);return t.position===n&&D(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(n,t.position),!0}function X(t){var n,i,e;if(42!==(e=t.input.charCodeAt(t.position)))return!1;for(e=t.input.charCodeAt(++t.position),n=t.position;0!==e&&!v(e)&&!y(e);)e=t.input.charCodeAt(++t.position);return t.position===n&&D(t,"name of an alias node must contain at least one character"),i=t.input.slice(n,t.position),t.anchorMap.hasOwnProperty(i)||D(t,'unidentified alias "'+i+'"'),t.result=t.anchorMap[i],_(t,!0,-1),!0}function Z(t,n,i,e,o){var c,u,d,h,f,g,A,m,C=1,k=!1,b=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,c=u=d=p===i||l===i,e&&_(t,!0,-1)&&(k=!0,t.lineIndent>n?C=1:t.lineIndent===n?C=0:t.lineIndent<n&&(C=-1)),1===C)for(;U(t)||V(t);)_(t,!0,-1)?(k=!0,d=c,t.lineIndent>n?C=1:t.lineIndent===n?C=0:t.lineIndent<n&&(C=-1)):d=!1;if(d&&(d=k||o),1!==C&&p!==i||(A=a===i||s===i?n:n+1,m=t.position-t.lineStart,1===C?d&&(Q(t,m)||R(t,m,A))||H(t,A)?b=!0:(u&&K(t,A)||J(t,A)||N(t,A)?b=!0:X(t)?(b=!0,null===t.tag&&null===t.anchor||D(t,"alias node should not have any properties")):P(t,A,a===i)&&(b=!0,null===t.tag&&(t.tag="?")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===C&&(b=d&&Q(t,m))),null!==t.tag&&"!"!==t.tag)if("?"===t.tag){for(h=0,f=t.implicitTypes.length;h<f;h+=1)if((g=t.implicitTypes[h]).resolve(t.result)){t.result=g.construct(t.result),t.tag=g.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else r.call(t.typeMap[t.kind||"fallback"],t.tag)?(g=t.typeMap[t.kind||"fallback"][t.tag],null!==t.result&&g.kind!==t.kind&&D(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+g.kind+'", not "'+t.kind+'"'),g.resolve(t.result)?(t.result=g.construct(t.result),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):D(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")):D(t,"unknown tag !<"+t.tag+">");return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||b}function tt(t){var n,i,e,o,a=t.position,s=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap={},t.anchorMap={};0!==(o=t.input.charCodeAt(t.position))&&(_(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||37!==o));){for(s=!0,o=t.input.charCodeAt(++t.position),n=t.position;0!==o&&!v(o);)o=t.input.charCodeAt(++t.position);for(e=[],(i=t.input.slice(n,t.position)).length<1&&D(t,"directive name must not be less than one character in length");0!==o;){for(;b(o);)o=t.input.charCodeAt(++t.position);if(35===o){do{o=t.input.charCodeAt(++t.position)}while(0!==o&&!k(o));break}if(k(o))break;for(n=t.position;0!==o&&!v(o);)o=t.input.charCodeAt(++t.position);e.push(t.input.slice(n,t.position))}0!==o&&$(t),r.call(B,i)?B[i](t,i,e):T(t,'unknown document directive "'+i+'"')}_(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,_(t,!0,-1)):s&&D(t,"directives end mark is expected"),Z(t,t.lineIndent-1,p,!1,!0),_(t,!0,-1),t.checkLineBreaks&&f.test(t.input.slice(a,t.position))&&T(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&z(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,_(t,!0,-1)):t.position<t.length-1&&D(t,"end of the stream or a document separator is expected")}function nt(t,n){n=n||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var i=new L(t,n);for(i.input+="\0";32===i.input.charCodeAt(i.position);)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)tt(i);return i.documents}function it(t,n,i){var e,o,r=nt(t,i);if("function"!=typeof n)return r;for(e=0,o=r.length;e<o;e+=1)n(r[e])}function et(t,i){var e=nt(t,i);if(0!==e.length){if(1===e.length)return e[0];throw new n("expected a single document in the stream, but found more")}}function ot(n,i,o){if("function"!=typeof i)return it(n,t.extend({schema:e},o));it(n,i,t.extend({schema:e},o))}function rt(n,i){return et(n,t.extend({schema:e},i))}module.exports.loadAll=it,module.exports.load=et,module.exports.safeLoadAll=ot,module.exports.safeLoad=rt;
},{"./common":"S/mA","./exception":"78AQ","./mark":"Ju+9","./schema/default_safe":"tLdR","./schema/default_full":"HKwV"}],"ZuFa":[function(require,module,exports) {
"use strict";var e=require("./common"),t=require("./exception"),n=require("./schema/default_full"),r=require("./schema/default_safe"),i=Object.prototype.toString,o=Object.prototype.hasOwnProperty,s=9,l=10,u=32,a=33,c=34,f=35,d=37,p=38,h=39,m=42,g=44,y=45,v=58,w=62,b=63,O=64,x=91,A=93,j=96,F=123,C=124,k=125,M={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},I=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function L(e,t){var n,r,i,s,l,u,a;if(null===t)return{};for(n={},i=0,s=(r=Object.keys(t)).length;i<s;i+=1)l=r[i],u=String(t[l]),"!!"===l.slice(0,2)&&(l="tag:yaml.org,2002:"+l.slice(2)),(a=e.compiledTypeMap.fallback[l])&&o.call(a.styleAliases,u)&&(u=a.styleAliases[u]),n[l]=u;return n}function _(n){var r,i,o;if(r=n.toString(16).toUpperCase(),n<=255)i="x",o=2;else if(n<=65535)i="u",o=4;else{if(!(n<=4294967295))throw new t("code point within a string may not be greater than 0xFFFFFFFF");i="U",o=8}return"\\"+i+e.repeat("0",o-r.length)+r}function K(t){this.schema=t.schema||n,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=e.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=L(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function S(t,n){for(var r,i=e.repeat(" ",n),o=0,s=-1,l="",u=t.length;o<u;)-1===(s=t.indexOf("\n",o))?(r=t.slice(o),o=u):(r=t.slice(o,s+1),o=s+1),r.length&&"\n"!==r&&(l+=i),l+=r;return l}function T(t,n){return"\n"+e.repeat(" ",t.indent*n)}function D(e,t){var n,r;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}function N(e){return e===u||e===s}function W(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&65279!==e||65536<=e&&e<=1114111}function q(e){return W(e)&&65279!==e&&e!==g&&e!==x&&e!==A&&e!==F&&e!==k&&e!==v&&e!==f}function R(e){return W(e)&&65279!==e&&!N(e)&&e!==y&&e!==b&&e!==v&&e!==g&&e!==x&&e!==A&&e!==F&&e!==k&&e!==f&&e!==p&&e!==m&&e!==a&&e!==C&&e!==w&&e!==h&&e!==c&&e!==d&&e!==O&&e!==j}function Y(e){return/^\n* /.test(e)}var E=1,P=2,U=3,z=4,B=5;function G(e,t,n,r,i){var o,s,u=!1,a=!1,c=-1!==r,f=-1,d=R(e.charCodeAt(0))&&!N(e.charCodeAt(e.length-1));if(t)for(o=0;o<e.length;o++){if(!W(s=e.charCodeAt(o)))return B;d=d&&q(s)}else{for(o=0;o<e.length;o++){if((s=e.charCodeAt(o))===l)u=!0,c&&(a=a||o-f-1>r&&" "!==e[f+1],f=o);else if(!W(s))return B;d=d&&q(s)}a=a||c&&o-f-1>r&&" "!==e[f+1]}return u||a?n>9&&Y(e)?B:a?z:U:d&&!i(e)?E:P}function H(e,n,r,i){e.dump=function(){if(0===n.length)return"''";if(!e.noCompatMode&&-1!==I.indexOf(n))return"'"+n+"'";var o=e.indent*Math.max(1,r),s=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),l=i||e.flowLevel>-1&&r>=e.flowLevel;switch(G(n,l,e.indent,s,function(t){return D(e,t)})){case E:return n;case P:return"'"+n.replace(/'/g,"''")+"'";case U:return"|"+J(n,e.indent)+Q(S(n,o));case z:return">"+J(n,e.indent)+Q(S(V(n,s),o));case B:return'"'+Z(n,s)+'"';default:throw new t("impossible error: invalid scalar style")}}()}function J(e,t){var n=Y(e)?String(t):"",r="\n"===e[e.length-1];return n+(r&&("\n"===e[e.length-2]||"\n"===e)?"+":r?"":"-")+"\n"}function Q(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function V(e,t){for(var n,r,i,o=/(\n+)([^\n]*)/g,s=(n=-1!==(n=e.indexOf("\n"))?n:e.length,o.lastIndex=n,X(e.slice(0,n),t)),l="\n"===e[0]||" "===e[0];i=o.exec(e);){var u=i[1],a=i[2];r=" "===a[0],s+=u+(l||r||""===a?"":"\n")+X(a,t),l=r}return s}function X(e,t){if(""===e||" "===e[0])return e;for(var n,r,i=/ [^ ]/g,o=0,s=0,l=0,u="";n=i.exec(e);)(l=n.index)-o>t&&(r=s>o?s:l,u+="\n"+e.slice(o,r),o=r+1),s=l;return u+="\n",e.length-o>t&&s>o?u+=e.slice(o,s)+"\n"+e.slice(s+1):u+=e.slice(o),u.slice(1)}function Z(e){for(var t,n,r,i="",o=0;o<e.length;o++)(t=e.charCodeAt(o))>=55296&&t<=56319&&(n=e.charCodeAt(o+1))>=56320&&n<=57343?(i+=_(1024*(t-55296)+n-56320+65536),o++):i+=!(r=M[t])&&W(t)?e[o]:r||_(t);return i}function $(e,t,n){var r,i,o="",s=e.tag;for(r=0,i=n.length;r<i;r+=1)ie(e,t,n[r],!1,!1)&&(0!==r&&(o+=","+(e.condenseFlow?"":" ")),o+=e.dump);e.tag=s,e.dump="["+o+"]"}function ee(e,t,n,r){var i,o,s="",u=e.tag;for(i=0,o=n.length;i<o;i+=1)ie(e,t+1,n[i],!0,!0)&&(r&&0===i||(s+=T(e,t)),e.dump&&l===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=u,e.dump=s||"[]"}function te(e,t,n){var r,i,o,s,l,u="",a=e.tag,c=Object.keys(n);for(r=0,i=c.length;r<i;r+=1)l=e.condenseFlow?'"':"",0!==r&&(l+=", "),s=n[o=c[r]],ie(e,t,o,!1,!1)&&(e.dump.length>1024&&(l+="? "),l+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),ie(e,t,s,!1,!1)&&(u+=l+=e.dump));e.tag=a,e.dump="{"+u+"}"}function ne(e,n,r,i){var o,s,u,a,c,f,d="",p=e.tag,h=Object.keys(r);if(!0===e.sortKeys)h.sort();else if("function"==typeof e.sortKeys)h.sort(e.sortKeys);else if(e.sortKeys)throw new t("sortKeys must be a boolean or a function");for(o=0,s=h.length;o<s;o+=1)f="",i&&0===o||(f+=T(e,n)),a=r[u=h[o]],ie(e,n+1,u,!0,!0,!0)&&((c=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&l===e.dump.charCodeAt(0)?f+="?":f+="? "),f+=e.dump,c&&(f+=T(e,n)),ie(e,n+1,a,!0,c)&&(e.dump&&l===e.dump.charCodeAt(0)?f+=":":f+=": ",d+=f+=e.dump));e.tag=p,e.dump=d||"{}"}function re(e,n,r){var s,l,u,a,c,f;for(u=0,a=(l=r?e.explicitTypes:e.implicitTypes).length;u<a;u+=1)if(((c=l[u]).instanceOf||c.predicate)&&(!c.instanceOf||"object"==typeof n&&n instanceof c.instanceOf)&&(!c.predicate||c.predicate(n))){if(e.tag=r?c.tag:"?",c.represent){if(f=e.styleMap[c.tag]||c.defaultStyle,"[object Function]"===i.call(c.represent))s=c.represent(n,f);else{if(!o.call(c.represent,f))throw new t("!<"+c.tag+'> tag resolver accepts not "'+f+'" style');s=c.represent[f](n,f)}e.dump=s}return!0}return!1}function ie(e,n,r,o,s,l){e.tag=null,e.dump=r,re(e,r,!1)||re(e,r,!0);var u=i.call(e.dump);o&&(o=e.flowLevel<0||e.flowLevel>n);var a,c,f="[object Object]"===u||"[object Array]"===u;if(f&&(c=-1!==(a=e.duplicates.indexOf(r))),(null!==e.tag&&"?"!==e.tag||c||2!==e.indent&&n>0)&&(s=!1),c&&e.usedDuplicates[a])e.dump="*ref_"+a;else{if(f&&c&&!e.usedDuplicates[a]&&(e.usedDuplicates[a]=!0),"[object Object]"===u)o&&0!==Object.keys(e.dump).length?(ne(e,n,e.dump,s),c&&(e.dump="&ref_"+a+e.dump)):(te(e,n,e.dump),c&&(e.dump="&ref_"+a+" "+e.dump));else if("[object Array]"===u){var d=e.noArrayIndent&&n>0?n-1:n;o&&0!==e.dump.length?(ee(e,d,e.dump,s),c&&(e.dump="&ref_"+a+e.dump)):($(e,d,e.dump),c&&(e.dump="&ref_"+a+" "+e.dump))}else{if("[object String]"!==u){if(e.skipInvalid)return!1;throw new t("unacceptable kind of an object to dump "+u)}"?"!==e.tag&&H(e,e.dump,n,l)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function oe(e,t){var n,r,i=[],o=[];for(se(e,i,o),n=0,r=o.length;n<r;n+=1)t.duplicates.push(i[o[n]]);t.usedDuplicates=new Array(r)}function se(e,t,n){var r,i,o;if(null!==e&&"object"==typeof e)if(-1!==(i=t.indexOf(e)))-1===n.indexOf(i)&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)se(e[i],t,n);else for(i=0,o=(r=Object.keys(e)).length;i<o;i+=1)se(e[r[i]],t,n)}function le(e,t){var n=new K(t=t||{});return n.noRefs||oe(e,n),ie(n,0,e,!0,!0)?n.dump+"\n":""}function ue(t,n){return le(t,e.extend({schema:r},n))}module.exports.dump=le,module.exports.safeDump=ue;
},{"./common":"S/mA","./exception":"78AQ","./schema/default_full":"HKwV","./schema/default_safe":"tLdR"}],"BW56":[function(require,module,exports) {
"use strict";var e=require("./js-yaml/loader"),o=require("./js-yaml/dumper");function s(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}module.exports.Type=require("./js-yaml/type"),module.exports.Schema=require("./js-yaml/schema"),module.exports.FAILSAFE_SCHEMA=require("./js-yaml/schema/failsafe"),module.exports.JSON_SCHEMA=require("./js-yaml/schema/json"),module.exports.CORE_SCHEMA=require("./js-yaml/schema/core"),module.exports.DEFAULT_SAFE_SCHEMA=require("./js-yaml/schema/default_safe"),module.exports.DEFAULT_FULL_SCHEMA=require("./js-yaml/schema/default_full"),module.exports.load=e.load,module.exports.loadAll=e.loadAll,module.exports.safeLoad=e.safeLoad,module.exports.safeLoadAll=e.safeLoadAll,module.exports.dump=o.dump,module.exports.safeDump=o.safeDump,module.exports.YAMLException=require("./js-yaml/exception"),module.exports.MINIMAL_SCHEMA=require("./js-yaml/schema/failsafe"),module.exports.SAFE_SCHEMA=require("./js-yaml/schema/default_safe"),module.exports.DEFAULT_SCHEMA=require("./js-yaml/schema/default_full"),module.exports.scan=s("scan"),module.exports.parse=s("parse"),module.exports.compose=s("compose"),module.exports.addConstructor=s("addConstructor");
},{"./js-yaml/loader":"puZk","./js-yaml/dumper":"ZuFa","./js-yaml/type":"XcPh","./js-yaml/schema":"nYLM","./js-yaml/schema/failsafe":"EJga","./js-yaml/schema/json":"ZUfC","./js-yaml/schema/core":"wwCT","./js-yaml/schema/default_safe":"tLdR","./js-yaml/schema/default_full":"HKwV","./js-yaml/exception":"78AQ"}],"6fmF":[function(require,module,exports) {
"use strict";var e=require("./lib/js-yaml.js");module.exports=e;
},{"./lib/js-yaml.js":"BW56"}],"N6d1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Utils=void 0;var e=r(require("js-yaml"));function r(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};n.get||n.set?Object.defineProperty(r,t,n):r[t]=e[t]}return r.default=e,r}var t,n=function(e,r,t,n){return new(t||(t=Promise))(function(o,i){function c(e){try{f(n.next(e))}catch(r){i(r)}}function a(e){try{f(n.throw(e))}catch(r){i(r)}}function f(e){e.done?o(e.value):new t(function(r){r(e.value)}).then(c,a)}f((n=n.apply(e,r||[])).next())})};exports.Utils=t,function(r){function t(e){let r="";[].slice.call(new Uint8Array(e)).forEach(e=>r+=String.fromCharCode(e));let t=window.btoa(r);for(;t.length%4>0;)t+="=";return t}function o(e){return`${e}${e.indexOf("?")>=0?"&":"?"}_=${(new Date).getTime()}`}r.parseYaml=function(r){return e.safeLoad(r)},r.fetchText=function(e,r=!0){return n(this,void 0,void 0,function*(){e=r?e:o(e);const t=new Request(e,{cache:r?"reload":"no-cache"});try{const r=yield fetch(t);if(r.ok)return yield r.text();throw new Error("Error fetching resource")}catch(n){throw new URIError(`${e}: ${n.message}`)}})},r.fetchImage=function(e,r=!0){return n(this,void 0,void 0,function*(){e=r?e:o(e);const n=new Request(e,{cache:r?"reload":"no-cache",headers:new Headers({"Content-Type":"text/plain; charset=x-user-defined"})});try{const r=yield fetch(n);if(r.ok)return`data:image/jpeg;base64,${t(yield r.arrayBuffer())}`;throw new Error("Error fetching resource")}catch(i){throw new URIError(`${e}: ${i.message}`)}})},r.getArray=function(e){return Array.isArray(e)?e:Object.keys(e).map(r=>e[r])},r.arrayBufferToBase64=t,r.cacheBuster=o,r.equal=function e(r,t){if(r===t)return!0;let n,o=Array.isArray(r),i=Array.isArray(t);if(o&&i){if(r.length!=t.length)return!1;for(n=0;n<r.length;n++)if(!e(r[n],t[n]))return!1;return!0}if(o!=i)return!1;if(r&&t&&"object"==typeof r&&"object"==typeof t){const o=Object.keys(r);if(o.length!==Object.keys(t).length)return!1;const i=r instanceof Date,c=t instanceof Date;if(i&&c)return r.getTime()==t.getTime();if(i!=c)return!1;const a=r instanceof RegExp,f=t instanceof RegExp;if(a&&f)return r.toString()==t.toString();if(a!=f)return!1;for(n=0;n<o.length;n++)if(!Object.prototype.hasOwnProperty.call(t,o[n]))return!1;for(n=0;n<o.length;n++)if(!e(r[o[n]],t[o[n]]))return!1;return!0}return!1}}(t||(exports.Utils=t={}));
},{"js-yaml":"6fmF"}],"FqNn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Floorplan=void 0;var t=require("./floorplan-info"),e=require("../fully-kiosk"),s=require("debounce"),i=o(require("js-yaml")),n=require("../utils");function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,s):{};i.get||i.set?Object.defineProperty(e,s,i):e[s]=t[s]}return e.default=t,e}var a=function(t,e,s,i){return new(s||(s=Promise))(function(n,o){function a(t){try{r(i.next(t))}catch(e){o(e)}}function l(t){try{r(i.throw(t))}catch(e){o(e)}}function r(t){t.done?n(t.value):new s(function(e){e(t.value)}).then(a,l)}r((i=i.apply(t,e||[])).next())})};class l{constructor(t){this.options=t,this.version="1.1.13",this.pageInfos=new Map,this.entityInfos=new Map,this.elementInfos=new Map,this.cssRules=new Array,this.logLevels=new Array,this.variables=new Map,this.handleEntitiesDebounced=(0,s.debounce)(this.handleEntities,100,!0),this.isLoading=!1,this.isLoaded=!1,window.onerror=this.handleWindowError.bind(this)}hassChanged(t){this.hass=t,this.loadOnce(),this.handleEntitiesDebounced()}loadOnce(){return a(this,void 0,void 0,function*(){if(!this.isLoading&&!this.isLoaded){this.isLoading=!0;try{const e=yield this.loadConfig(this.options.config);if(this.getLogLevels(e),this.logInfo("VERSION",`Floorplan v${this.version}`),!this.validateConfig(e))return void this.options.setIsLoading(!1);this.options.config=e,this.options.config.pages?yield this.initMultiPage():yield this.initSinglePage(),this.isLoaded=!0,this.isLoading=!1}catch(t){this.isLoaded=!0,this.isLoading=!1,this.options.setIsLoading(!1),this.handleError(t)}}})}initMultiPage(){return a(this,void 0,void 0,function*(){try{yield this.loadPages(),this.options.setIsLoading(!1),this.initPageDisplay(),this.initVariables(),this.initStartupActions(),yield this.handleEntities(!0)}catch(t){this.handleError(t)}})}initSinglePage(){return a(this,void 0,void 0,function*(){try{const e=this.getBestImage(this.options.config),s=yield this.loadFloorplanSvg(e);this.options.config.svg=s,yield this.loadStyleSheet(this.options.config.stylesheet),this.initFloorplan(s,this.options.config),this.options.setIsLoading(!1),this.initPageDisplay(),this.initVariables(),this.initStartupActions(),yield this.handleEntities(!0)}catch(t){this.handleError(t)}})}getLogLevels(t){if(!t.log_level)return;const e={error:["error"],warning:["error","warning"],info:["error","warning","info"],debug:["error","warning","info","debug"]}[t.log_level.toLowerCase()];this.logLevels=e||[]}loadConfig(t){return a(this,void 0,void 0,function*(){if("string"==typeof t){const e=yield n.Utils.fetchText(t);return i.safeLoad(e)}return t})}loadLibraries(){return a(this,void 0,void 0,function*(){this.isOptionEnabled(this.options.config.pan_zoom)&&(yield this.loadScript("/local/floorplan/lib/svg-pan-zoom.min.js",!0)),this.isOptionEnabled(this.options.config.fully_kiosk)&&(yield this.loadScript("/local/floorplan/lib/fully-kiosk.js",!1))})}loadScript(t,e){return t?new Promise((s,i)=>{const o=document.createElement("script");o.src=e?t:n.Utils.cacheBuster(t),o.onload=(()=>s()),o.onerror=(t=>{i(new URIError(`${t.target.src}`))}),this.options.root.appendChild(o)}):Promise.resolve()}loadPages(){return a(this,void 0,void 0,function*(){for(let n of this.options.config.pages)yield this.loadPageConfig(n,this.options.config.pages.indexOf(n));const t=Array.from(this.pageInfos.keys()).map(t=>this.pageInfos.get(t));t.sort((t,e)=>t.index-e.index);const e=t.find(t=>void 0!==t.config.master_page);e&&(e.isMaster=!0);const s=t.find(t=>void 0===t.config.master_page);s&&(s.isDefault=!0),yield this.loadPageFloorplanSvg(e,e);const i=t.filter(t=>t!==e);for(let n of i)yield this.loadPageFloorplanSvg(n,e)})}loadPageConfig(t,e){return a(this,void 0,void 0,function*(){const s=yield this.loadConfig(t),i=this.createPageInfo(s);return i.index=e,i})}loadPageFloorplanSvg(t,e){return a(this,void 0,void 0,function*(){const s=this.getBestImage(t.config),i=yield this.loadFloorplanSvg(s,t,e);i.id=t.config.page_id,t.svg=i,yield this.loadStyleSheet(t.config.stylesheet),this.initFloorplan(t.svg,t.config)})}getBestImage(t){let e="";if("string"==typeof t.image)e=t.image;else if(t.image&&t.image.sizes){t.image.sizes.sort((t,e)=>e.min_width-t.min_width);for(let s of t.image.sizes)if(screen.width>=s.min_width){e=s.location;break}}return e}createPageInfo(t){const e={config:t};return e.config.rules&&this.options.config.rules&&(e.config.rules=e.config.rules.concat(this.options.config.rules)),this.pageInfos.set(e.config.page_id,e),e}loadStyleSheet(t){return a(this,void 0,void 0,function*(){if(!t)return;const e=yield n.Utils.fetchText(t),s=document.createElement("style");s.type="text/css",s.innerHTML=e,this.options.root.appendChild(s);const i=n.Utils.getArray(s.sheet.cssRules);this.cssRules=this.cssRules.concat(i)})}loadFloorplanSvg(t,e,s){return a(this,void 0,void 0,function*(){const i=yield n.Utils.fetchText(t),o=document.createElement("div");o.innerHTML=i;const a=o.querySelector("svg");if(e&&a.setAttribute("id",e.config.page_id),a.setAttribute("height","100%"),a.setAttribute("width","100%"),a.style.height="100%",a.style.width="100%",a.style.cursor="default",a.style.opacity="0",a.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),e&&s){const t=s.config.page_id,i=s.config.master_page.content_element;if(e.config.page_id===t)this.options.element.appendChild(a);else{this.options.element.querySelector("#"+t);const e=this.options.element.querySelector("#"+i),s=Number.parseFloat(a.getAttribute("height")),n=Number.parseFloat(a.getAttribute("width"));a.getAttribute("viewBox")||a.setAttribute("viewBox",`0 0 ${n} ${s}`),a.setAttribute("preserveAspectRatio","xMinYMin meet"),a.setAttribute("height",e.getAttribute("height")),a.setAttribute("width",e.getAttribute("width")),a.setAttribute("x",e.getAttribute("x")),a.setAttribute("y",e.getAttribute("y")),e.parentElement.appendChild(a)}}else this.options.element.appendChild(a);return a})}loadImage(t,e,s,i){return a(this,void 0,void 0,function*(){return t.toLowerCase().indexOf(".svg")>=0?yield this.loadSvgImage(t,e,s,i):yield this.loadBitmapImage(t,e,s,i)})}loadBitmapImage(t,e,s,i){return a(this,void 0,void 0,function*(){const o=yield n.Utils.fetchImage(t);this.logDebug("IMAGE",`${s} (setting image: ${t})`);let a=e.svgElement;return"image"!==a.nodeName&&(a=this.createImageElement(e.originalSvgElement),this.querySelectorAll(a,"*",!0).forEach(t=>{const n=document.createElementNS("http://www.w3.org/2000/svg","title");t.appendChild(n),t.onclick=this.onEntityClick.bind({instance:this,svgElementInfo:e,entityId:s,rule:i}),t.style.cursor="pointer",this.addClass(t,"floorplan-item")}),e.svgElement=this.replaceElement(e.svgElement,a)),a.getAttributeNS("http://www.w3.org/1999/xlink","xlink:href")!==o&&a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t),a})}loadSvgImage(t,e,s,i){return a(this,void 0,void 0,function*(){const o=yield n.Utils.fetchText(t,!0);this.logDebug("IMAGE",`${s} (setting image: ${t})`);const a=document.createElement("div");a.innerHTML=o;const l=a.querySelector("svg"),r=Number.parseFloat(l.getAttribute("height")),h=Number.parseFloat(l.getAttribute("width"));return l.getAttribute("viewBox")||l.setAttribute("viewBox",`0 0 ${h} ${r}`),l.id=e.svgElement.id,l.setAttribute("preserveAspectRatio","xMinYMin meet"),l.setAttribute("height",e.originalBBox.height.toString()),l.setAttribute("width",e.originalBBox.width.toString()),l.setAttribute("x",e.originalBBox.x.toString()),l.setAttribute("y",e.originalBBox.y.toString()),this.querySelectorAll(l,"*",!0).forEach(t=>{const n=document.createElementNS("http://www.w3.org/2000/svg","title");t.appendChild(n),t.onclick=this.onEntityClick.bind({instance:this,svgElementInfo:e,entityId:s,rule:i}),t.style.cursor="pointer",this.addClass(t,"floorplan-item")}),e.svgElement=this.replaceElement(e.svgElement,l),l})}querySelectorAll(t,e,s){let i=Array.from(t.querySelectorAll(e).values());return i=s?i.concat(t):i}replaceElement(t,e){const s=t.parentElement;return this.querySelectorAll(t,"*",!0).forEach(t=>{t.onclick=null,t.remove()}),t.remove(),s.appendChild(e),e}initFullyKiosk(){this.isOptionEnabled(this.options.config.fully_kiosk)&&(this.fullyKiosk=new e.FullyKiosk(this),this.fullyKiosk.init())}initPageDisplay(){if(this.options.config.pages)for(let t of this.pageInfos.keys()){const e=this.pageInfos.get(t);e.svg.style.opacity="1",e.svg.style.display=e.isMaster||e.isDefault?"initial":"none"}else this.options.config.svg.style.opacity="1",this.options.config.svg.style.display="block"}initVariables(){if(this.options.config.variables)for(let t of this.options.config.variables)this.initVariable(t);if(this.options.config.pages)for(let t of this.pageInfos.keys()){const e=this.pageInfos.get(t);if(e.config.variables)for(let t of e.config.variables)this.initVariable(t)}}initVariable(t){let e,s;if("string"==typeof t?e=t:(e=t.name,s=t.value,t.value_template&&(s=this.evaluate(t.value_template,e,void 0))),!this.entityInfos.has(e)){let t={entityId:e,ruleInfos:[],lastState:void 0};this.entityInfos.set(e,t)}this.hass.states[e]||(this.hass.states[e]={entity_id:e,state:s,last_changed:new Date,attributes:{}}),this.setVariable(e,s,[],!0)}initStartupActions(){let t=new Array;const e=this.options.config.startup;if(e&&e.action&&(t=t.concat(Array.isArray(e.action)?e.action:[e.action])),this.options.config.pages)for(let s of this.pageInfos.keys()){const e=this.pageInfos.get(s),i=e.config&&e.config.startup;i&&i.action&&(t=t.concat(Array.isArray(i.action)?i.action:[i.action]))}for(let s of t)if(s.service||s.service_template){const t=this.getActionService(s,void 0,void 0);switch(this.getDomain(t)){case"floorplan":this.callFloorplanService(s,void 0,void 0);break;default:this.callHomeAssistantService(s,void 0,void 0)}}}initFloorplan(t,e){if(!e.rules)return;const s=this.querySelectorAll(t,"*",!0);this.initLastMotion(e,t,s),this.initRules(e,t,s)}initLastMotion(t,e,s){if(t.last_motion&&t.last_motion.entity&&t.last_motion.class){this.lastMotionConfig=t.last_motion;const e={entityId:t.last_motion.entity,ruleInfos:[],lastState:void 0};this.entityInfos.set(t.last_motion.entity,e)}}initRules(t,e,s){if(t.defaults)for(let i of t.rules)i.hover_over=void 0===i.hover_over?t.defaults.hover_over:i.hover_over,i.more_info=void 0===i.more_info?t.defaults.more_info:i.more_info,i.propagate=void 0===i.propagate?t.defaults.propagate:i.propagate;for(let i of t.rules)i.entity||i.entities?this.initEntityRule(i,e,s):(i.element||i.elements)&&this.initElementRule(i,e,s)}initEntityRule(e,s,i){const n=this.initGetEntityRuleEntities(e);for(let o of n){const n=o.entityId,a=o.elementId;let l=this.entityInfos.get(n);l||(l={entityId:n,ruleInfos:[],lastState:void 0},this.entityInfos.set(n,l));const r=new t.FloorplanInfo.RuleInfo(e);l.ruleInfos.push(r);const h=i.find(t=>t.id===a);if(!h){this.logWarning("CONFIG",`Cannot find element '${a}' in SVG file`);continue}const g=this.addSvgElementToRule(s,h,r);g.svgElement=h,h.appendChild(document.createElementNS("http://www.w3.org/2000/svg","title")),this.querySelectorAll(h,"*",!0).forEach(t=>{const s=document.createElementNS("http://www.w3.org/2000/svg","title");t.appendChild(s),t.onclick=this.onEntityClick.bind({instance:this,svgElementInfo:g,entityId:n,rule:e}),(r.rule.action||!1!==r.rule.more_info)&&(t.style.cursor="pointer"),this.addClass(t,"floorplan-item")})}}initGetEntityRuleEntities(t){const e=new Array;t.groups=t.groups?t.groups:new Array;for(let n of t.groups){const t=this.hass.states[n];if(t)for(let s of t.attributes.entity_id)this.addTargetEntity(s,s,e);else this.logWarning("CONFIG",`Cannot find '${n}' in Home Assistant groups`)}t.entities=t.entities?t.entities:new Array,t.entities=t.entity?t.entities.concat(t.entity):t.entities;const s=t.entities.filter(t=>"string"==typeof t);for(let n of s){const s=t.element?t.element:n;this.addTargetEntity(n,s,e)}const i=t.entities.filter(t=>"string"!=typeof t);for(let n of i){const t=n;this.addTargetEntity(t.entity,t.element,e)}return e}addTargetEntity(t,e,s){const i=this.hass.states[t],n="floorplan"===t.split(".")[0];i||n?s.push({entityId:t,elementId:e}):this.logWarning("CONFIG",`Cannot find '${t}' in Home Assistant entities`)}initElementRule(e,s,i){if(e.element||e.elements){e.elements=e.elements?e.elements:new Array,e.elements=e.element?e.elements.concat(e.element):e.elements;for(let n of e.elements){const o=i.find(t=>t.id===n);if(o){let a=this.elementInfos.get(n);a||(a={ruleInfos:[],lastState:void 0},this.elementInfos.set(n,a));const l=new t.FloorplanInfo.RuleInfo(e);a.ruleInfos.push(l);const r=this.addSvgElementToRule(s,o,l);this.querySelectorAll(o,"*",!0).forEach(t=>{const s=document.createElementNS("http://www.w3.org/2000/svg","title");t.appendChild(s),t.onclick=this.onElementClick.bind({instance:this,svgElementInfo:r,elementId:n,rule:e}),(l.rule.action||!1!==l.rule.more_info)&&(t.style.cursor="pointer"),this.addClass(t,"floorplan-item")});const h=Array.isArray(e.action)?e.action:[e.action];for(let t of h.filter(t=>void 0!==t))switch(t.service){case"toggle":for(let e of t.data.elements){const s=i.find(t=>t.id===e);s&&this.addClass(s,t.data.default_class)}}}else this.logWarning("CONFIG",`Cannot find '${n}' in SVG file`)}}}addBackgroundRectToText(t){const e=t.svgElement,s=e.getBBox(),i=document.createElementNS("http://www.w3.org/2000/svg","rect");i.setAttribute("id",e.id+".background"),i.setAttribute("height",(s.height+1).toString()),i.setAttribute("width",(s.width+2).toString()),i.setAttribute("x",(s.x-1).toString()),i.setAttribute("y",(s.y-.5).toString()),i.style.fillOpacity="0",e.parentElement.insertBefore(i,e)}addSvgElementToRule(e,s,i){const o=new t.FloorplanInfo.SvgElementInfo(s.id,e,s,s,n.Utils.getArray(s.classList),s.getBBox(),s.getBoundingClientRect());return i.svgElementInfos.set(s.id,o),o}addNestedSvgElementsToRule(e,s){this.querySelectorAll(e,"*",!1).forEach(i=>{const o=new t.FloorplanInfo.SvgElementInfo(e.id,void 0,i,i,n.Utils.getArray(i.classList),i.getBBox(),i.getBoundingClientRect());s.svgElementInfos.set(e.id,o)})}createImageElement(t){const e=document.createElementNS("http://www.w3.org/2000/svg","image");return e.setAttribute("id",t.getAttribute("id")),e.setAttribute("x",t.getAttribute("x")),e.setAttribute("y",t.getAttribute("y")),e.setAttribute("height",t.getAttribute("height")),e.setAttribute("width",t.getAttribute("width")),e}hasClass(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}removeClass(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}addClass(t,e){t.classList?t.classList.add(e):t.className+=" "+e}addClasses(t,e,s,i){if(s&&s.length)for(let n of s){if(this.hasClass(e,"ha-leave-me-alone"))return;this.hasClass(e,n)||(this.logDebug("CLASS",`${t} (adding class: ${n})`),this.addClass(e,n),e.nodeName),(i||void 0===i)&&this.querySelectorAll(e,"*",!1).forEach(t=>{this.hasClass(t,"ha-leave-me-alone")||this.hasClass(t,n)||this.addClass(t,n)})}}removeClasses(t,e,s,i){if(s&&s.length)for(let n of s)this.hasClass(e,n)&&(this.logDebug("CLASS",`${t} (removing class: ${n})`),this.removeClass(e,n),(i||void 0===i)&&this.querySelectorAll(e,"*",!1).forEach(t=>{this.hasClass(t,n)&&this.removeClass(t,n)}))}handleEntities(t=!1){return a(this,void 0,void 0,function*(){this.handleElements(t);let e=this.getChangedEntities(t);if((e=e.concat(Array.from(this.variables.keys())))&&e.length)for(let s of e)yield this.handleEntity(s,t)})}getChangedEntities(t){const e=new Array,s=Object.keys(this.hass.states);let i,o,a;this.lastMotionConfig&&(i=this.entityInfos.get(this.lastMotionConfig.entity))&&i.lastState&&(o=i.lastState.state,a=this.hass.states[this.lastMotionConfig.entity].state);for(let l of s){const s=this.entityInfos.get(l);if(s){const i=this.hass.states[l];if(t)this.logDebug("STATE",`${l}: ${i.state} (initial load)`),e.indexOf(l)<0&&e.push(l);else if(s.lastState){s.lastState.state;const t=i.state;if(i.last_changed!==s.lastState.last_changed?(this.logDebug("STATE",`${l}: ${t} (last changed ${this.formatDate(s.lastState.last_changed)})`),e.indexOf(l)<0&&e.push(l)):n.Utils.equal(s.lastState.attributes,i.attributes)||(this.logDebug("STATE",`${l}: attributes (last updated ${this.formatDate(s.lastState.last_changed)})`),e.indexOf(l)<0&&e.push(l)),this.lastMotionConfig&&a!==o&&l.indexOf("binary_sensor")>=0){const t=i.attributes.friendly_name;t===a?(this.logDebug("LAST_MOTION",`${l} (new)`),e.indexOf(l)<0&&e.push(l)):t===o&&(this.logDebug("LAST_MOTION",`${l} (old)`),e.indexOf(l)<0&&e.push(l))}}}}return e}handleEntity(t,e){return a(this,void 0,void 0,function*(){const s=this.hass.states[t],i=this.entityInfos.get(t);i&&(i.lastState=Object.assign({},s),yield this.handleEntityUpdateDom(i),this.handleEntityUpdateCss(i,e),this.handleEntityUpdateLastMotionCss(i),this.handleEntitySetHoverOver(i))})}handleEntityUpdateDom(t){return a(this,void 0,void 0,function*(){const e=t.entityId;this.hass.states[e];for(let s of t.ruleInfos)for(let t of s.svgElementInfos.keys()){const i=s.svgElementInfos.get(t);"text"===i.svgElement.nodeName?this.handleEntityUpdateText(e,s,i):(s.rule.image||s.rule.image_template)&&(yield this.handleEntityUpdateImage(e,s,i))}})}handleElements(t){return a(this,void 0,void 0,function*(){for(let e of this.elementInfos.keys()){const s=this.elementInfos.get(e);yield this.handleElementUpdateDom(s),this.handleElementUpdateCss(s,t)}})}handleElementUpdateDom(t){return a(this,void 0,void 0,function*(){for(let e of t.ruleInfos)for(let t of e.svgElementInfos.keys()){const s=e.svgElementInfos.get(t);"text"===s.svgElement.nodeName?this.handleEntityUpdateText(t,e,s):(e.rule.image||e.rule.image_template)&&(yield this.handleEntityUpdateImage(t,e,s))}})}getParents(t,e){for(var s=new Array,i=t.parentNode;i!==e;)s.push(i),i=i.parentNode;return s.push(e),s}handleEntityUpdateText(t,e,s){const i=s.svgElement,n=this.hass.states[t]?this.hass.states[t].state:void 0,o=e.rule.text_template?this.evaluate(e.rule.text_template,t,i):n,a=i.querySelector("tspan");if(a)a.textContent=o;else{let t=i.querySelector("title");t||(t=document.createElementNS("http://www.w3.org/2000/svg","title"),i.appendChild(t)),t.textContent=o}}handleEntityUpdateImage(t,e,s){return a(this,void 0,void 0,function*(){const i=s.svgElement,n=e.rule.image?e.rule.image:this.evaluate(e.rule.image_template,t,i);if(n&&e.imageUrl!==n){if(e.imageUrl=n,e.imageLoader&&clearInterval(e.imageLoader),e.rule.image_refresh_interval){const o=parseInt(e.rule.image_refresh_interval);e.imageLoader=setInterval((i,n)=>{this.loadImage(i,s,t,e.rule).catch(t=>{this.handleError(t)})},1e3*o,n,i)}try{yield this.loadImage(n,s,t,e.rule)}catch(o){this.handleError(o)}}})}handleEntitySetHoverOver(t){const e=t.entityId,s=this.hass.states[e];for(let i of t.ruleInfos)if(!1!==i.rule.hover_over)for(let t of i.svgElementInfos.keys()){const e=i.svgElementInfos.get(t);this.handlEntitySetHoverOverText(e.svgElement,s)}}handlEntitySetHoverOverText(t,e){this.options.config.date_format&&this.options.config.date_format;t.querySelectorAll("title").forEach(t=>{const s=this.formatDate(e.last_changed),i=this.formatDate(e.last_updated);let n=`${e.attributes.friendly_name}\n`;n+=`State: ${e.state}\n\n`,Object.keys(e.attributes).map(t=>{n+=`${t}: ${e.attributes[t]}\n`}),n+="\n",n+=`Last changed: ${s}\n`,n+=`Last updated: ${i}`,t.textContent=n})}handleElementUpdateCss(t,e){if(this.cssRules&&this.cssRules.length)for(let s of t.ruleInfos)for(let t of s.svgElementInfos.keys()){const e=s.svgElementInfos.get(t);this.handleUpdateElementCss(e,s)}}handleEntityUpdateCss(t,e){if(this.cssRules&&this.cssRules.length)for(let s of t.ruleInfos)for(let e of s.svgElementInfos.keys()){const i=s.svgElementInfos.get(e);i.svgElement&&this.handleUpdateCss(t,i,s)}}getStateConfigClasses(t){let e=new Array;return t?(Array.isArray(t.class)?e=t.class:"string"==typeof t.class?e=t.class.split(" ").map(t=>t.trim()):Array.isArray(t.classes)?e=t.classes:"string"==typeof t.classes&&(e=t.classes.split(" ").map(t=>t.trim())),e):[]}handleUpdateCss(t,e,s){const i=t.entityId,o=e.svgElement;let a=new Array;if(s.rule.class_template){const t=this.evaluate(s.rule.class_template,i,o);a=t?t.split(" "):[]}let l=new Array;if(s.rule.states){const t=this.hass.states[i],n=s.rule.states.find(e=>e.state===t.state);a=this.getStateConfigClasses(n);for(let i of s.rule.states)if(!n||i.state!==n.state){const t=this.getStateConfigClasses(i);for(let s of t)s&&a.indexOf(s)<0&&"floorplan-item"!==s&&this.hasClass(o,s)&&e.originalClasses.indexOf(s)<0&&l.push(s)}}else if(o.classList)for(let r of n.Utils.getArray(o.classList))a.indexOf(r)<0&&"floorplan-item"!==r&&this.hasClass(o,r)&&e.originalClasses.indexOf(r)<0&&l.push(r);this.removeClasses(i,o,l,s.rule.propagate),this.addClasses(i,o,a,s.rule.propagate)}handleUpdateElementCss(t,e){const s=t.entityId,i=t.svgElement;let o=new Array;if(e.rule.class_template){const t=this.evaluate(e.rule.class_template,s,i);o=t?t.split(" "):[]}const a=new Array;for(let l of n.Utils.getArray(i.classList))o.indexOf(l)<0&&"floorplan-item"!==l&&this.hasClass(i,l)&&t.originalClasses.indexOf(l)<0&&a.push(l);this.removeClasses(s,i,a,e.rule.propagate),this.addClasses(s,i,o,e.rule.propagate)}handleEntityUpdateLastMotionCss(t){if(!this.lastMotionConfig||!this.cssRules||!this.cssRules.length)return;const e=t.entityId,s=this.hass.states[e];if(s)for(let i of t.ruleInfos)for(let t of i.svgElementInfos.keys()){const n=i.svgElementInfos.get(t).svgElement,o=this.getStateConfigClasses(this.lastMotionConfig);this.hass.states[this.lastMotionConfig.entity]&&s.attributes.friendly_name===this.hass.states[this.lastMotionConfig.entity].state?this.addClasses(e,n,o,i.propagate):this.removeClasses(e,n,o,i.propagate)}}isOptionEnabled(t){return null===t||void 0!==t}isLastMotionEnabled(){return void 0!==(this.lastMotionConfig&&this.options.config.last_motion.entity&&this.options.config.last_motion.class)}validateConfig(t){let e=!0;if(t.pages||t.rules)if(t.pages)t.pages.length||(this.logError("CONFIG","The 'pages' section must contain one or more pages in floorplan configuration"),e=!1);else{t.rules||(this.logError("CONFIG","Cannot find 'rules' in floorplan configuration"),e=!1);let s=t.rules.filter(t=>t.entities&&t.elements);s.length&&(this.logError("CONFIG","A rule cannot contain both 'entities' and 'elements' in floorplan configuration"),e=!1),(s=t.rules.filter(t=>!(t.entity||t.entities||t.element||t.elements))).length&&(this.logError("CONFIG","A rule must contain either 'entities' or 'elements' in floorplan configuration"),e=!1)}else this.options.setIsLoading(!1),this.logError("CONFIG","Cannot find 'pages' nor 'rules' in floorplan configuration"),e=!1;return e}formatDate(t){return t?"string"==typeof t?new Date(t).toLocaleString():t.toLocaleString():""}evaluate(t,e,s){try{const n=e?this.hass.states[e]:void 0;let o=t.indexOf("${")>=0?`\`${t}\`;`:t;return o=o.indexOf("return")>=0?o:`return ${o};`,new Function("entity","entities","hass","config","element",o)(n,this.hass.states,this.hass,this.options.config,s)}catch(i){}}onElementClick(t){t.stopPropagation();this.instance.onActionClick(this.svgElementInfo,this.elementId,this.elementId,this.rule)}onEntityClick(t){t.stopPropagation();this.instance.onActionClick(this.svgElementInfo,this.entityId,this.elementId,this.rule)}onActionClick(t,e,s,i){let n=this.entityInfos.get(e);const o=n&&n.ruleInfos.find(t=>void 0!==t.rule.action),a=i.action?i:o?o.rule:void 0;if(!i||!a)return void(e&&!1!==i.more_info&&this.options.openMoreInfo(e));let l=0;const r=t.svgElement,h=Array.isArray(a.action)?a.action:[a.action];for(let g of h)if(g.service||g.service_template){const s=this.getActionService(g,e,r);switch(this.getDomain(s)){case"floorplan":this.callFloorplanService(g,e,t);break;default:this.callHomeAssistantService(g,e,t)}l++}l||e&&!1!==a.more_info&&this.options.openMoreInfo(e)}callFloorplanService(t,e,s){const i=s?s.svgElement:void 0,n=this.getActionService(t,e,i),o=this.getActionData(t,e,i);switch(this.getService(n)){case"class_toggle":if(o){const t=o.classes;for(let e of o.elements){const i=s.svg.querySelector(`[id="${e}"]`);i&&(this.hasClass(i,t[0])?(this.removeClass(i,t[0]),this.addClass(i,t[1])):this.hasClass(i,t[1])?(this.removeClass(i,t[1]),this.addClass(i,t[0])):this.addClass(i,o.default_class))}}break;case"page_navigate":const t=o.page_id,a=t&&this.pageInfos.get(t);a&&(Array.from(this.pageInfos.keys()).map(t=>{const e=this.pageInfos.get(t);e.isMaster||"none"===e.svg.style.display||(e.svg.style.display="none")}),a.svg.style.display="block");break;case"variable_set":if(o.variable){const t=[];if(o.attributes)for(let n of o.attributes){const s=this.getActionValue(n,e,i);t.push({name:n.attribute,value:s})}const s=this.getActionValue(o,e,i);this.setVariable(o.variable,s,t,!1)}}}getActionValue(t,e,s){let i=t.value;return t.value_template&&(i=this.evaluate(t.value_template,e,s)),i}setVariable(t,e,s,i){if(this.variables.set(t,e),this.hass.states[t]){this.hass.states[t].state=e;for(let e of s)this.hass.states[t].attributes[e.name]=e.value}for(let n of Array.from(this.variables.keys())){const t=this.hass.states[n];t&&(t.last_changed=new Date)}i||this.handleEntitiesDebounced()}callHomeAssistantService(t,e,s){const i=s?s.svgElement:void 0,n=this.getActionService(t,e,i),o=this.getActionData(t,e,i);!o.entity_id&&e&&(o.entity_id=e),this.hass.callService(this.getDomain(n),this.getService(n),o)}getActionData(t,e,s){let i=t.data?t.data:{};if(t.data_template){const n=this.evaluate(t.data_template,e,s);i="string"==typeof n?JSON.parse(n):n}return i}getActionService(t,e,s){let i=t.service;return t.service_template&&(i=this.evaluate(t.service_template,e,s)),i}getDomain(t){return t.split(".")[0]}getService(t){return t.split(".")[1]}handleWindowError(t,e,s,i,n){if(this.options.setIsLoading(!1),t.toLowerCase().indexOf("script error")>=0)this.logError("SCRIPT","Script error: See browser console for detail");else{const o=[t,"URL: "+e,"Line: "+s+", column: "+i,"Error: "+JSON.stringify(n)].join("<br>");this.logError("ERROR",o)}return!1}handleError(t){let e="Error";"string"==typeof t&&(e=t),t.stack?e=`${t.stack}`:t.message&&(e=`${t.message}`),this.log("error",e)}logError(t,e){this.log("error",`${t} ${e}`)}logWarning(t,e){this.log("warning",`${t} ${e}`)}logInfo(t,e){this.log("info",`${t} ${e}`)}logDebug(t,e){this.log("debug",`${t} ${e}`)}log(t,e){const s=`${this.formatDate(new Date)} ${t.toUpperCase()} ${e}`;if(this.options.config&&this.options.config.debug_level)switch(this.options.config.debug_level){case"error":console.error(s);break;case"warning":console.warn(s);break;case"error":console.info(s);break;default:console.log(s)}const i=this.logLevels&&this.logLevels.length&&this.logLevels.indexOf(t)>=0;if(!this.options.config&&"error"===t||i){const e=this.options.root.querySelector("#log"),i=document.createElement("li");this.addClass(i,t),i.textContent=s,e.querySelector("ul").prepend(i),e.style.display="block"}}}exports.Floorplan=l;
},{"./floorplan-info":"p0+R","../fully-kiosk":"aEOy","debounce":"dLxY","js-yaml":"6fmF","../utils":"N6d1"}],"U1ok":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FloorplanElement=void 0;var n=require("./lib/floorplan/floorplan");class e extends HTMLElement{constructor(){super(),this.isFloorplanLoading=!1,this.isFloorplanLoaded=!1,this.isLoading=!1,this.debug("constructor"),Object.defineProperties(this,this.properties),this.attachShadow({mode:"open"})}debug(n){this._config&&(this._config.trace||this._config.config&&this._config.config.trace)&&console.log(n)}connectedCallback(){this.debug("connectedCallback")}get properties(){this.debug("get properties");const n=this;return{config:{set(e){n.setConfig(e)}},hass:{set(e){n.setHass(e)}}}}setConfig(n){this.debug("setConfig"),this._config=n,this.initDom(n),this.setIsLoading(!0)}setHass(n){this.debug("setHass"),this._config&&this.isConnected&&(this.loadFloorplanOnce(n,this._config),this.floorplan.hassChanged(n))}loadFloorplanOnce(e,t){if(this.debug("loadFloorplanOnce"),this.isFloorplanLoading||this.isFloorplanLoaded)return;this.isFloorplanLoading=!0;const o={root:this.shadowRoot,element:this.floorplanElement,hass:e,config:t&&t.config||t,openMoreInfo:this.openMoreInfo.bind(this),setIsLoading:this.setIsLoading.bind(this)};this.floorplan=new n.Floorplan(o),this.isFloorplanLoading=!1,this.isFloorplanLoaded=!0}initDom(n){this.debug("initDom");const e=this.shadowRoot;e.lastChild&&e.removeChild(e.lastChild);const t=document.createElement("style");t.textContent=this.getStyle(),e.appendChild(t);const o=this.createAppendContainer(),i=document.createElement("paper-spinner-lite");o.appendChild(i);const s=document.createElement("div");s.id="floorplan",o.appendChild(s);const l=document.createElement("div");l.id="log",o.appendChild(l);const r=document.createElement("ul");l.appendChild(r);const a=document.createElement("a");a.setAttribute("href","#"),a.text="Clear log",l.appendChild(a),a.onclick=(()=>{r.innerHTML="",l.style.display="none"}),this.log=l,this.spinner=i,this.floorplanElement=s}createAppendContainer(){const n=document.createElement("div");return n.id="container",this.shadowRoot.appendChild(n),n}getStyle(){return this.debug("getStyle"),"\n      #container {\n        text-align: center;\n        height: 100%;\n        width: 100%;\n      }\n\n      #floorplan {\n        height: 100%;\n        width: 100%;\n       /*\n       flex: 1;\n       */\n    }\n\n      paper-spinner-lite {\n        margin-top: 50px;\n        margin-bottom: 50px;\n        /*\n        flex: 1;\n        */\n      }\n\n      #log {\n        min-height: 100px;\n        max-height: 100px;\n        overflow: auto;\n        background-color: #eee;\n        display: none;\n        padding: 10px;\n        /*\n        flex: 1;\n        */\n      }\n\n      #log ul {\n        list-style-type: none;\n        padding-left: 0px;\n        text-align: left;\n      }\n\n      .error {\n        color: #FF0000;\n      }\n\n      .warning {\n        color: #FF851B;\n      }\n\n      .info {\n        color: #0000FF;\n      }\n\n      .debug {\n        color: #000000;\n      }\n    "}openMoreInfo(n){this.fire("hass-more-info",{entityId:n})}setIsLoading(n){this.isLoading=n,this.spinner&&(this.isLoading?(this.spinner.setAttribute("active",""),this.spinner.style.display="inline-block"):(this.spinner.removeAttribute("active"),this.spinner.style.display="none"))}logError(n){console.error(n),this.log&&(this.log.querySelector("ul").prepend(`<li class="error">${n}</li>`),this.log.style.display="block")}fire(n,e,t){t=t||{},e=null==e?{}:e;const o=new Event(n,{bubbles:void 0===t.bubbles||t.bubbles,cancelable:Boolean(t.cancelable),composed:void 0===t.composed||t.composed});return o.detail=e,(t.node||this).dispatchEvent(o),o}}exports.FloorplanElement=e;
},{"./lib/floorplan/floorplan":"FqNn"}],"eqce":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FloorplanPanel=void 0;var e=require("./floorplan-element");class l extends e.FloorplanElement{}exports.FloorplanPanel=l,customElements.define("floorplan-panel",l);
},{"./floorplan-element":"U1ok"}]},{},["eqce"], null)
//# sourceMappingURL=/floorplan-panel.894fd844.js.map